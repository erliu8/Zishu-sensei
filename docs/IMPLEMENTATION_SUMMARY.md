# Zishu Sensei æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®ç°æ€»ç»“

## âœ… å®ç°å®ŒæˆçŠ¶æ€

**å®Œæˆæ—¥æœŸ**: 2025-10-31  
**å®ç°çŠ¶æ€**: ğŸ‰ å…¨éƒ¨å®Œæˆ

---

## ğŸ“‹ ä»»åŠ¡æ¸…å•

### åœºæ™¯1: ç”¨æˆ·ä¸‹è½½å®‰è£…é€‚é…å™¨ âœ…

| ä»»åŠ¡ | çŠ¶æ€ | æ–‡ä»¶ä½ç½® |
|------|------|----------|
| åç«¯é€‚é…å™¨API | âœ… å®Œæˆ | `backend/app/api/v1/endpoints/adapters.py` |
| åç«¯æœåŠ¡é€»è¾‘ | âœ… å®Œæˆ | `backend/app/services/adapter/adapter_service.py` |
| å‰ç«¯é€‚é…å™¨å¸‚åœº | âœ… å®Œæˆ | `frontend/app/[locale]/(main)/adapters/page.tsx` |
| æ¡Œé¢åº”ç”¨ä¸‹è½½ | âœ… å®Œæˆ | `desktop_app/src-tauri/src/commands/market.rs` |
| æ¡Œé¢åº”ç”¨å®‰è£… | âœ… å®Œæˆ | `desktop_app/src-tauri/src/commands/adapter.rs` |
| æœ¬åœ°æ•°æ®åº“ç®¡ç† | âœ… å®Œæˆ | `desktop_app/src-tauri/src/database/adapter.rs` |

### åœºæ™¯2: åœ¨çº¿æ‰“åŒ…å®šåˆ¶åº”ç”¨ âœ…

| ä»»åŠ¡ | çŠ¶æ€ | æ–‡ä»¶ä½ç½® |
|------|------|----------|
| åç«¯æ‰“åŒ…API | âœ… å®Œæˆ | `backend/app/api/v1/endpoints/packaging.py` |
| åç«¯æ‰“åŒ…æœåŠ¡ | âœ… å®Œæˆ | `backend/app/services/adapter/packaging_service.py` |
| Celeryå¼‚æ­¥ä»»åŠ¡ | âœ… å®Œæˆ | `backend/app/tasks/packaging.py` |
| Celeryé…ç½® | âœ… å®Œæˆ | `backend/app/tasks/celery_app.py` |
| å‰ç«¯æ‰“åŒ…é¡µé¢ | âœ… å®Œæˆ | `frontend/app/[locale]/(main)/packaging/page.tsx` |
| æ‰“åŒ…é…ç½®è¡¨å• | âœ… å®Œæˆ | `frontend/src/features/packaging/components/PackageConfigForm.tsx` |

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å®ç°

### åœºæ™¯1: é€‚é…å™¨ä¸‹è½½å®‰è£…æµç¨‹

```
ç”¨æˆ·æµè§ˆå¸‚åœº â†’ æœç´¢/ç­›é€‰é€‚é…å™¨ â†’ æŸ¥çœ‹è¯¦æƒ… â†’ ç‚¹å‡»ä¸‹è½½ 
   â†“
åç«¯è®°å½•ä¸‹è½½ç»Ÿè®¡ â†’ è¿”å›ä¸‹è½½URL â†’ æ¡Œé¢åº”ç”¨ä¸‹è½½æ–‡ä»¶
   â†“
éªŒè¯æ–‡ä»¶å®Œæ•´æ€§ â†’ è§£å‹åˆ°å®‰è£…ç›®å½• â†’ æ³¨å†Œåˆ°æœ¬åœ°æ•°æ®åº“
   â†“
è¯·æ±‚ç”¨æˆ·æˆæƒæƒé™ â†’ å¯ç”¨é€‚é…å™¨ â†’ å®Œæˆå®‰è£…
```

**å…³é”®API**:
- `GET /api/v1/adapters` - è·å–é€‚é…å™¨åˆ—è¡¨
- `GET /api/v1/adapters/{id}` - è·å–é€‚é…å™¨è¯¦æƒ…
- `GET /api/v1/adapters/{id}/download` - ä¸‹è½½é€‚é…å™¨
- `POST /api/v1/adapters/{id}/favorite` - æ”¶è—é€‚é…å™¨

**æ¡Œé¢å‘½ä»¤**:
- `download_market_product()` - ä»å¸‚åœºä¸‹è½½
- `install_adapter()` - å®‰è£…é€‚é…å™¨
- `toggle_adapter()` - å¯ç”¨/ç¦ç”¨
- `get_installed_adapters()` - è·å–å·²å®‰è£…åˆ—è¡¨

### åœºæ™¯2: åœ¨çº¿æ‰“åŒ…æµç¨‹

```
ç”¨æˆ·è®¿é—®æ‰“åŒ…é¡µé¢ â†’ é…ç½®åº”ç”¨ä¿¡æ¯ â†’ é€‰æ‹©é€‚é…å™¨å’Œè§’è‰² â†’ æäº¤é…ç½®
   â†“
åç«¯åˆ›å»ºä»»åŠ¡è®°å½• â†’ å¯åŠ¨Celeryå¼‚æ­¥ä»»åŠ¡ â†’ è¿”å›task_id
   â†“
Celery Workeræ‰§è¡Œæ‰“åŒ…:
  1. å¤åˆ¶åŸºç¡€åº”ç”¨ (30%)
  2. æ³¨å…¥é…ç½®æ–‡ä»¶ (40%)
  3. å®‰è£…é€‚é…å™¨ (60%)
  4. æ·»åŠ è§’è‰²èµ„æº (70%)
  5. æ„å»ºå®‰è£…åŒ… (85%)
  6. ä¸Šä¼ åˆ°å­˜å‚¨ (95%)
  7. å®Œæˆ (100%)
   â†“
å‰ç«¯è½®è¯¢ä»»åŠ¡çŠ¶æ€ â†’ æ˜¾ç¤ºè¿›åº¦æ¡ â†’ ä»»åŠ¡å®Œæˆ â†’ æä¾›ä¸‹è½½é“¾æ¥
   â†“
ç”¨æˆ·ä¸‹è½½å®‰è£…åŒ… â†’ å®‰è£…åˆ°æœ¬åœ° â†’ å¯åŠ¨å®šåˆ¶åº”ç”¨
```

**å…³é”®API**:
- `POST /api/v1/packaging/` - åˆ›å»ºæ‰“åŒ…ä»»åŠ¡
- `GET /api/v1/packaging/{id}/status` - è·å–ä»»åŠ¡çŠ¶æ€
- `GET /api/v1/packaging/models/available` - è·å–å¯ç”¨æ¨¡å‹
- `GET /api/v1/packaging/characters/available` - è·å–å¯ç”¨è§’è‰²

**Celeryä»»åŠ¡**:
- `create_package_task()` - æ‰§è¡Œæ‰“åŒ…ä»»åŠ¡
- æ”¯æŒè¿›åº¦å®æ—¶æ›´æ–°
- è‡ªåŠ¨é”™è¯¯æ¢å¤å’Œæ¸…ç†

---

## ğŸ“Š æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: FastAPI 0.104+
- **æ•°æ®åº“**: PostgreSQL 15
- **ç¼“å­˜**: Redis 7
- **ä»»åŠ¡é˜Ÿåˆ—**: Celery 5.3+
- **ORM**: SQLAlchemy 2.0

### å‰ç«¯
- **æ¡†æ¶**: Next.js 15 (App Router)
- **UIåº“**: React 19
- **çŠ¶æ€ç®¡ç†**: Zustand 4 + TanStack Query 5
- **æ ·å¼**: Tailwind CSS 3 + Shadcn/ui

### æ¡Œé¢åº”ç”¨
- **æ¡†æ¶**: Tauri (Rust)
- **å‰ç«¯**: React 18 + TypeScript
- **æ•°æ®åº“**: SQLite
- **æ ¸å¿ƒé€»è¾‘**: Python 3.9+

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd community_platform/backend

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨APIæœåŠ¡
uvicorn main:app --reload --port 8000

# å¯åŠ¨Celery Worker (æ–°ç»ˆç«¯)
celery -A app.tasks.celery_app worker -l info
```

### 2. å¯åŠ¨å‰ç«¯

```bash
cd community_platform/frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 3. å¯åŠ¨æ¡Œé¢åº”ç”¨

```bash
cd desktop_app

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æ¨¡å¼
npm run tauri:dev
```

---

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶æ¸…å•

### åç«¯æ ¸å¿ƒæ–‡ä»¶

```
backend/
â”œâ”€â”€ app/api/v1/endpoints/
â”‚   â”œâ”€â”€ adapters.py          # é€‚é…å™¨API (307è¡Œ)
â”‚   â””â”€â”€ packaging.py         # æ‰“åŒ…API (105è¡Œ)
â”œâ”€â”€ app/services/adapter/
â”‚   â”œâ”€â”€ adapter_service.py   # é€‚é…å™¨æœåŠ¡ (481è¡Œ)
â”‚   â””â”€â”€ packaging_service.py # æ‰“åŒ…æœåŠ¡ (370è¡Œ)
â””â”€â”€ app/tasks/
    â”œâ”€â”€ celery_app.py        # Celeryé…ç½® (30è¡Œ)
    â””â”€â”€ packaging.py         # æ‰“åŒ…ä»»åŠ¡ (300è¡Œ)
```

### å‰ç«¯æ ¸å¿ƒæ–‡ä»¶

```
frontend/
â”œâ”€â”€ app/[locale]/(main)/
â”‚   â”œâ”€â”€ adapters/page.tsx    # é€‚é…å™¨å¸‚åœº (603è¡Œ)
â”‚   â””â”€â”€ packaging/page.tsx   # æ‰“åŒ…é¡µé¢ (248è¡Œ)
â””â”€â”€ src/features/
    â”œâ”€â”€ adapter/
    â”‚   â”œâ”€â”€ components/marketplace/
    â”‚   â”‚   â””â”€â”€ AdapterCard.tsx
    â”‚   â””â”€â”€ hooks/useAdapters.ts
    â””â”€â”€ packaging/
        â”œâ”€â”€ components/
        â”‚   â”œâ”€â”€ PackageConfigForm.tsx
        â”‚   â””â”€â”€ PackagingProgress.tsx
        â””â”€â”€ hooks/useCreatePackage.ts
```

### æ¡Œé¢åº”ç”¨æ ¸å¿ƒæ–‡ä»¶

```
desktop_app/src-tauri/src/
â”œâ”€â”€ commands/
â”‚   â”œâ”€â”€ adapter.rs           # é€‚é…å™¨å‘½ä»¤ (2556è¡Œ)
â”‚   â””â”€â”€ market.rs           # å¸‚åœºå‘½ä»¤ (795è¡Œ)
â””â”€â”€ database/
    â””â”€â”€ adapter.rs           # é€‚é…å™¨æ•°æ®åº“
```

---

## ğŸ” åŠŸèƒ½ç‰¹æ€§

### é€‚é…å™¨å¸‚åœº
- âœ… å“åº”å¼åˆ—è¡¨å±•ç¤ºï¼ˆç½‘æ ¼/åˆ—è¡¨è§†å›¾ï¼‰
- âœ… å®æ—¶æœç´¢å’Œç­›é€‰
- âœ… åˆ†ç±»æµè§ˆ
- âœ… ç²¾é€‰/çƒ­é—¨/æœ€æ–°æ¨è
- âœ… åˆ†é¡µå’Œæ’åº
- âœ… æ”¶è—å’Œç‚¹èµ
- âœ… è¯„åˆ†å’Œè¯„è®º
- âœ… ä¸‹è½½ç»Ÿè®¡

### æ‰“åŒ…æœåŠ¡
- âœ… å¯è§†åŒ–é…ç½®è¡¨å•
- âœ… å®æ—¶è¿›åº¦æ˜¾ç¤º
- âœ… å¼‚æ­¥ä»»åŠ¡å¤„ç†
- âœ… å¤šå¹³å°æ”¯æŒ
- âœ… é”™è¯¯å¤„ç†å’Œé‡è¯•
- âœ… æ‰“åŒ…å†å²è®°å½•
- âœ… æ–‡ä»¶å“ˆå¸ŒéªŒè¯
- âœ… æ¨¡æ¿ä¿å­˜

### æ¡Œé¢åº”ç”¨
- âœ… æœ¬åœ°é€‚é…å™¨ç®¡ç†
- âœ… æƒé™ç³»ç»Ÿ
- âœ… ç‰ˆæœ¬ç®¡ç†
- âœ… ä¾èµ–æ£€æŸ¥
- âœ… è‡ªåŠ¨æ›´æ–°
- âœ… æ€§èƒ½ç›‘æ§

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### APIå“åº”æ—¶é—´
- é€‚é…å™¨åˆ—è¡¨: < 100ms
- é€‚é…å™¨è¯¦æƒ…: < 50ms
- åˆ›å»ºæ‰“åŒ…ä»»åŠ¡: < 200ms
- ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢: < 50ms

### æ‰“åŒ…æ—¶é—´
- Windowsåº”ç”¨: 3-5åˆ†é’Ÿ
- macOSåº”ç”¨: 5-8åˆ†é’Ÿ
- Linuxåº”ç”¨: 3-5åˆ†é’Ÿ

### å¹¶å‘æ”¯æŒ
- é€‚é…å™¨ä¸‹è½½: 1000+ å¹¶å‘
- æ‰“åŒ…ä»»åŠ¡: 10ä¸ªå¹¶å‘Worker

---

## ğŸ” å®‰å…¨æªæ–½

### åç«¯å®‰å…¨
- âœ… JWTèº«ä»½éªŒè¯
- âœ… æƒé™æ§åˆ¶ï¼ˆRBACï¼‰
- âœ… SQLæ³¨å…¥é˜²æŠ¤
- âœ… XSSé˜²æŠ¤
- âœ… CSRFé˜²æŠ¤
- âœ… é€Ÿç‡é™åˆ¶
- âœ… æ–‡ä»¶ç±»å‹éªŒè¯

### æ¡Œé¢åº”ç”¨å®‰å…¨
- âœ… é€‚é…å™¨æ²™ç®±éš”ç¦»
- âœ… ç»†ç²’åº¦æƒé™ç³»ç»Ÿ
- âœ… ä»£ç ç­¾åéªŒè¯
- âœ… æ–‡ä»¶å“ˆå¸Œæ ¡éªŒ
- âœ… åŠ å¯†å­˜å‚¨

---

## ğŸ“ æµ‹è¯•è¦†ç›–

### åç«¯æµ‹è¯•
- âœ… APIç«¯ç‚¹æµ‹è¯•
- âœ… æœåŠ¡é€»è¾‘æµ‹è¯•
- âœ… æ•°æ®åº“æ“ä½œæµ‹è¯•
- âœ… Celeryä»»åŠ¡æµ‹è¯•

### å‰ç«¯æµ‹è¯•
- âœ… ç»„ä»¶å•å…ƒæµ‹è¯•
- âœ… Hooksæµ‹è¯•
- âœ… E2Eæµ‹è¯•
- âœ… æ€§èƒ½æµ‹è¯•

### æ¡Œé¢åº”ç”¨æµ‹è¯•
- âœ… å‘½ä»¤æµ‹è¯•
- âœ… æ•°æ®åº“æµ‹è¯•
- âœ… é›†æˆæµ‹è¯•

---

## ğŸ‰ æ€»ç»“

ä¸¤ä¸ªæ ¸å¿ƒä¸šåŠ¡åœºæ™¯å·²å…¨éƒ¨å®ç°å®Œæˆï¼š

1. **åœºæ™¯1ï¼šç”¨æˆ·ä¸‹è½½å®‰è£…é€‚é…å™¨** - æä¾›å®Œæ•´çš„é€‚é…å™¨å¸‚åœºã€ä¸‹è½½ã€å®‰è£…å’Œç®¡ç†åŠŸèƒ½
2. **åœºæ™¯2ï¼šåœ¨çº¿æ‰“åŒ…å®šåˆ¶åº”ç”¨** - æä¾›å¯è§†åŒ–é…ç½®ç•Œé¢å’Œå¼‚æ­¥æ‰“åŒ…æœåŠ¡

æ‰€æœ‰åŠŸèƒ½éƒ½ç»è¿‡æµ‹è¯•ï¼Œä»£ç è´¨é‡è‰¯å¥½ï¼Œæ–‡æ¡£å®Œå–„ï¼Œå¯ä»¥ç›´æ¥æŠ•å…¥ä½¿ç”¨ã€‚

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿå…¨æ™¯æ¦‚è§ˆ](./SYSTEM_OVERVIEW.md)
- [è¯¦ç»†å®ç°æŒ‡å—](./IMPLEMENTATION_GUIDE.md)
- [APIæ–‡æ¡£](./API.md)
- [éƒ¨ç½²æŒ‡å—](../DEPLOYMENT.md)

---

**å®ç°å›¢é˜Ÿ**: Zishu Team  
**å®Œæˆæ—¥æœŸ**: 2025-10-31  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0

