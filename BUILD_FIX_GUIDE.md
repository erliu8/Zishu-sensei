# æ„å»ºé—®é¢˜è§£å†³æ–¹æ¡ˆæŒ‡å—

## é—®é¢˜æ¦‚è¿°

æ‚¨åœ¨æ„å»º Tauri åº”ç”¨æ—¶é‡åˆ°äº†ä»¥ä¸‹é—®é¢˜ï¼š
1. æ›´æ–°å™¨ç§é’¥å¯†ç é”™è¯¯ï¼š`incorrect updater private key password: Missing comment in secret key`
2. Redis ç‰ˆæœ¬å…¼å®¹æ€§è­¦å‘Š
3. å¤§é‡ç¼–è¯‘è­¦å‘Šï¼ˆ755ä¸ªï¼‰

## è§£å†³æ–¹æ¡ˆ

### 1. ğŸ”‘ ä¿®å¤æ›´æ–°å™¨ç§é’¥é—®é¢˜

#### é—®é¢˜åˆ†æ
Tauri ä½¿ç”¨ minisign æ¥ç­¾åæ›´æ–°åŒ…ã€‚é”™è¯¯æç¤ºè¯´æ˜ç§é’¥æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®æˆ–ç¼ºå°‘å¿…è¦çš„æ³¨é‡Šã€‚

#### è§£å†³æ­¥éª¤

**æ­¥éª¤ 1ï¼šç”Ÿæˆæ–°çš„å¯†é’¥å¯¹**
```bash
# å¦‚æœæ²¡æœ‰å®‰è£… minisignï¼Œå…ˆå®‰è£…
# Ubuntu/Debian:
sudo apt install minisign

# macOS:
brew install minisign

# Windows: ä¸‹è½½ https://jedisct1.github.io/minisign/

# ç”Ÿæˆæ–°çš„å¯†é’¥å¯¹
minisign -G -p zishu-sensei.pub -s zishu-sensei.key
```

**æ­¥éª¤ 2ï¼šé…ç½® GitHub Secrets**
1. å°†ç§é’¥å†…å®¹å¤åˆ¶åˆ° GitHub Secretsï¼š
   ```bash
   cat zishu-sensei.key
   ```
   å¤åˆ¶è¾“å‡ºå†…å®¹åˆ° GitHub ä»“åº“çš„ Settings â†’ Secrets and variables â†’ Actions â†’ New repository secret
   - Name: `TAURI_PRIVATE_KEY`
   - Value: ç§é’¥æ–‡ä»¶çš„å®Œæ•´å†…å®¹

2. è®¾ç½®ç§é’¥å¯†ç ï¼š
   - Name: `TAURI_KEY_PASSWORD` 
   - Value: æ‚¨åœ¨ç”Ÿæˆå¯†é’¥æ—¶è®¾ç½®çš„å¯†ç ï¼ˆå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œå¯ä»¥ç•™ç©ºæˆ–è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰

**æ­¥éª¤ 3ï¼šæ›´æ–° tauri.conf.json ä¸­çš„å…¬é’¥**
```bash
# è·å–å…¬é’¥çš„ base64 ç¼–ç 
cat zishu-sensei.pub | base64 -w 0
```

å°†è¾“å‡ºç»“æœæ›´æ–°åˆ° `desktop_app/src-tauri/tauri.conf.json` ä¸­çš„ `pubkey` å­—æ®µã€‚

### 2. âœ… Redis ç‰ˆæœ¬å·²ä¿®å¤

å·²å°† Redis ç‰ˆæœ¬ä» 0.25.4 å‡çº§åˆ° 0.26ï¼Œè§£å†³äº†å…¼å®¹æ€§è­¦å‘Šã€‚

### 3. ğŸ§¹ æ¸…ç†ç¼–è¯‘è­¦å‘Š

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ä¿®å¤å¯è‡ªåŠ¨ä¿®å¤çš„è­¦å‘Šï¼š
```bash
cd desktop_app/src-tauri
cargo fix --bin "zishu-sensei" --allow-dirty --allow-staged
```

### 4. ğŸš€ é‡æ–°æ„å»º

å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œé‡æ–°è¿è¡Œæ„å»ºï¼š
```bash
cd desktop_app
npm run tauri:build
```

## å¯é€‰ä¼˜åŒ–

### ç¦ç”¨æ›´æ–°å™¨ï¼ˆä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼‰
å¦‚æœæš‚æ—¶ä¸éœ€è¦è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ `tauri.conf.json` ä¸­ç¦ç”¨ï¼š
```json
{
  "updater": {
    "active": false
  }
}
```

### æ£€æŸ¥æœªæ¥ä¸å…¼å®¹æ€§é—®é¢˜
è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹è¯¦ç»†çš„å…¼å®¹æ€§æŠ¥å‘Šï¼š
```bash
cargo report future-incompatibilities --id 1
```

## éªŒè¯ä¿®å¤

1. æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ
2. éªŒè¯ç”Ÿæˆçš„å®‰è£…åŒ…
3. æµ‹è¯•æ›´æ–°å™¨åŠŸèƒ½ï¼ˆå¦‚æœå¯ç”¨ï¼‰

## æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦**ï¼š
- ç§é’¥æ–‡ä»¶å¿…é¡»å¦¥å–„ä¿ç®¡ï¼Œä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
- ç¡®ä¿ GitHub Secrets é…ç½®æ­£ç¡®
- å…¬é’¥å’Œç§é’¥å¿…é¡»æ˜¯é…å¯¹çš„

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ï¼š
1. GitHub Secrets æ˜¯å¦æ­£ç¡®é…ç½®
2. ç§é’¥æ–‡ä»¶æ ¼å¼æ˜¯å¦å®Œæ•´
3. å¯†ç æ˜¯å¦æ­£ç¡®ï¼ˆå¦‚æœè®¾ç½®äº†å¯†ç ï¼‰
