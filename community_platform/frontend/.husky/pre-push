#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Git pre-push hook å¼€å§‹è¿è¡Œ..."
echo ""

# æ¨é€å‰è¿›è¡Œç±»å‹æ£€æŸ¥
echo "ğŸ” æ­£åœ¨è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥..."
npm run type-check

if [ $? -ne 0 ]; then
  echo "âŒ TypeScript ç±»å‹æ£€æŸ¥å¤±è´¥ï¼Œè¯·ä¿®å¤ç±»å‹é”™è¯¯åé‡æ–°æ¨é€"
  exit 1
fi

# æ¨é€å‰è¿è¡Œ lint
echo "ğŸ” æ­£åœ¨è¿è¡Œ ESLint ä»£ç æ£€æŸ¥..."
npm run lint

if [ $? -ne 0 ]; then
  echo "âŒ ESLint æ£€æŸ¥å¤±è´¥ï¼Œè¯·ä¿®å¤ lint é”™è¯¯åé‡æ–°æ¨é€"
  exit 1
fi

# å¯é€‰ï¼šè¿è¡Œæµ‹è¯•
# echo "ğŸ§ª æ­£åœ¨è¿è¡Œå•å…ƒæµ‹è¯•..."
# npm run test

echo "âœ… Pre-push æ£€æŸ¥é€šè¿‡ï¼"
echo ""

